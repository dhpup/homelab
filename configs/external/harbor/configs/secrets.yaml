apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: harbor-secrets
spec:
  target:
    name: harbor-secrets
    deletionPolicy: Delete
    template:
      type: Opaque
      data:
        HARBOR_ADMIN_PASSWORD: |-
          {{ .harborAdminPassword }}
        REGISTRY_HTPASSWD: |-
          {{ .registryHtpasswd }}
        REGISTRY_PASSWD: |-
          {{ .registryPasswd }}
        secretKey: |-
          {{ .secretKey }}
  data:
    - secretKey: harborAdminPassword
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 7174f659-ad9a-4eff-81f3-b37c00242034
        property: harborAdminPassword
    - secretKey: registryHtpasswd
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 7174f659-ad9a-4eff-81f3-b37c00242034
        property: registryHtpasswd
    - secretKey: registryPasswd
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 7174f659-ad9a-4eff-81f3-b37c00242034
        property: registryPasswd
    - secretKey: secretKey
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 7174f659-ad9a-4eff-81f3-b37c00242034
        property: secretKey